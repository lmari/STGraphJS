<html>
<head>
<link rel="stylesheet" href="res/jquery-ui.min.css">
<script src="res/jquery.min.js"></script>
<script src="res/jquery-ui.min.js"></script>
<script src="res/Chart.bundle.min.js"></script>
<script src='./env.js'></script>
<script src='./model.js'></script>
<script src='./functions.js'></script>
<script src='./chart.js'></script>
<script src='./table.js'></script>

<script src='./mod/keynes.js'></script>
<script>
$(document).ready(function() {
  var env = new _Env(_env_data.timed, _env_data.trace, _env_data.simDelay);
  $('#page_title').html(_env_data.title);
  var model = new _Model(env, _model_data.time0, _model_data.time1, _model_data.timeD);

  for(let __x of _model_data.parameters) eval(`var ${__x.id} = new Parameter("${__x.id}", model, ${__x.val})`);
  for(let __x of _model_data.variables) eval(`var ${__x.id} = new Variable("${__x.id}", model, ${__x.out})`);
  for(let __x of _model_data.variables) {
    if(__x.phi != undefined) eval(`${__x.id}.setState(${__x.phi}, ${__x.args}, ${__x.init})`);
    if(__x.eta != undefined) eval(`${__x.id}.setAlgebraic(${__x.eta}, ${__x.args})`);
  }

  _env_data.charts.forEach(__x => new _Chart(model, __x, eval(__x.series)));
  _env_data.tables.forEach(__x => new _Table(model, __x, eval(__x.series)));
  model.eval();
});
</script>
</head>
<body>
<div id="toolbar"></div>
<h1 id='page_title'></h1>
</body>
</html>
